<div class="registration-container parentbackgroundcolor">

  <div class="header mt-3">
    <h1>Overview of File</h1>
  </div>
  <br><br>
  <div class="row">
    <!-- Left side: File Request Id -->
    <div class="col-md-6 col-sm-12 col-xs-12 mb-3">
        <mat-label class="title">File Request Id :- </mat-label>
        <p class="fid">{{ frId }}</p>
    </div>
    <!-- Right side: Current Status -->
    <div class="col-md-6 col-sm-12 col-xs-12 mb-3 text-right">
        <span style="font-weight: normal; font-size: 16px; margin-left: 7%;">Current Status: </span>
        <span style="font-weight: bold; font-size: 17px; color: blue;">
            {{ currentStatus }}
        </span>
    </div>
</div>


    <div class="marquee">
      <div class="track">
        <div class="content" *ngIf="status === 'Form Submitted GIS Pending'">
          ...The file request has been successfully submitted and is now awaiting GIS processing. Please open the GIS
          app on your mobile and capture the precise Longitude and Latitude coordinates for the plot. </div>
      </div>
    </div>
    <div class="marquee">
      <div class="track">
        <div class="content"
          *ngIf="status === 'Plinth Payment Completed & Inspection Schedule' || status === 'Occupancy Payment Completed & Inspection Schedule'">
          ...The file request has been successfully Assigned to you and Inspection is Scheduled. Please open the GIS app
          on your mobile and capture the precise images to complete the Inspection. </div>
      </div>
    </div>


  </div>

  <!-- <div class="col-md-4 col-sm-12 col-xs-12">
        <mat-label class="title">File No :- </mat-label>
        <p class="fid">{{fileNo}}</p>
    </div> -->
  <hr />


  <mat-expansion-panel class="mt-4">
    <mat-expansion-panel-header>
      <mat-panel-title>Owners Sections ðŸ‘‡</mat-panel-title>
    </mat-expansion-panel-header>
    <app-owner-applicant-detials></app-owner-applicant-detials>
  </mat-expansion-panel>

  <div class="m-4">
    <div class="row mb-2 mt-2 d-flex justify-content-between">

      <mat-card class="display-6 mb-5">
        <mat-card-header>
          <mat-card-title class="mb-3">Project overview</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="row">
            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Nature of project: </span>
                  <span class="natureOfProject-value">&nbsp; {{ natureOfProject }}</span>
                </div>
                <input matInput name="natureOfProject" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Plan type: </span>
                  <span class="natureOfProject-value">&nbsp; {{ planType }}</span>
                </div>
                <input matInput name="natureOfProject" readonly />
              </mat-form-field>
            </div>


            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Project type: </span>
                  <span class="natureOfProject-value">&nbsp; {{ bCategory }}</span>
                </div>
                <input matInput name="natureOfProject" readonly />
              </mat-form-field>
            </div>


            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control" style="width: 100%;">
                <div class="placeholder-wrapper" style="display: flex; align-items: center; justify-content: flex-start; width: 100%; overflow: hidden; box-sizing: border-box;">
                 
                  <span class="placeholder-text" style="flex-shrink: 0; margin-right: 5px;">Project Sub type: </span>
                  <span class="natureOfProject-value"
                  style="display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: calc(100% - 150px); margin-left: 1%; cursor: pointer;" 
                    title="{{ bSubCategory }}">
                    {{ bSubCategory }}
                  </span>
                </div>
                <input matInput name="natureOfProject"  style="width: 100%;" readonly />
              </mat-form-field>
            </div>

            <!-- <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control" style="width: 100%;">
                <div class="placeholder-wrapper"
                  style="display: flex; align-items: center; justify-content: flex-start;">
                  <span class="placeholder-text" style="flex-shrink: 0; margin-right: 5px;">
                    File current status:
                  </span>

                  <span class="natureOfProject-value"
                    style="display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90%; position: relative; cursor: pointer;"
                    title="{{ currentStatus }}">
                    {{ currentStatus }}
                  </span>
                </div>
                <input matInput name="natureOfProject" readonly style="width: 100%;" />
              </mat-form-field>
            </div> -->

          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="display-6 mb-5">
        <mat-card-header>
          <mat-card-title class="mb-3">Site location details</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="row">
            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control" style="width: 100%; display: block;">
                <div class="placeholder-wrapper"
                  style="display: flex; align-items: center; justify-content: flex-start;">
                  <span class="placeholder-text" style="flex-shrink: 0; margin-right: 5px;">
                    Site address:
                  </span>
                  <!-- Add the ellipsis functionality -->
                  <span class="site-value"
                    style="display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 90%; max-width: 100%; position: relative; cursor: pointer;"
                    title="{{ address }}">
                    {{ address }}
                  </span>
                </div>
                <input matInput name="address" readonly />
              </mat-form-field>
            </div>




            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Block : </span>
                  <span class="blockNumber-value">&nbsp; {{ blockNumber }}</span>
                </div>
                <input matInput name="blockNumber" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">District: </span>
                  <span class="district-value">&nbsp; {{ district }}</span>
                </div>
                <input matInput name="district" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">State: </span>
                  <span class="state-value">&nbsp; {{ state }}</span>
                </div>
                <input matInput name="state" readonly />
              </mat-form-field>
            </div>
            <!-- View zone ward colony -->
            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Zone: </span>
                  <span class="zone-value">&nbsp; {{ zone }}</span>
                </div>
                <input matInput name="zone" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Ward: </span>
                  <span class="ward-value">&nbsp; {{ ward }}</span>
                </div>
                <input matInput name="ward" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Colony: </span>
                  <span class="colony-value">&nbsp; {{ colony }}</span>
                </div>
                <input matInput name="colony" readonly />
              </mat-form-field>
            </div>



            <!-- end View zone ward colony -->
            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Pincode : </span>
                  <span class="pinCode-value">&nbsp; {{ pinCode }}</span>
                </div>
                <input matInput name="pinCode" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control" style="width: 100%;">
                <div class="placeholder-wrapper"
                  style="display: flex; align-items: center; justify-content: flex-start;">
                  <span class="placeholder-text" style="flex-shrink: 0; margin-right: 5px;">
                    Nearest landmark:
                  </span>
                  <!-- Apply inline CSS for ellipsis effect and hover functionality -->
                  <span class="landMark-value"
                    style="display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90%; cursor: pointer;"
                    title="{{ landMark }}">
                    {{ landMark }}
                  </span>
                </div>
                <input matInput name="landMark" readonly style="width: 100%;" />
              </mat-form-field>
            </div>


          </div>
        </mat-card-content>
      </mat-card>


      <mat-card class="display-6 mb-5">
        <mat-card-header>
          <mat-card-title class="mb-3">Site plan specifics/design particulars</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="row">
            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Plot area: </span>
                  <span class="pArea-value">&nbsp; {{ pArea }}</span>
                </div>
                <input matInput name="pArea" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Total covered area : </span>
                  <span class="cArea-value">&nbsp; {{ cArea }}</span>
                </div>
                <input matInput name="cArea" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Total covered area by FAR :
                  </span>
                  <span class="cAreaFar-value">&nbsp; {{ cAreaFar }}</span>
                </div>
                <input matInput name="cAreaFar" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Building height : </span>
                  <span class="bHeight-value">&nbsp; {{ bHeight }}</span>
                </div>
                <input matInput name="bHeight" readonly />
              </mat-form-field>
            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Front width : </span>
                  <span class="frontWidth-value">&nbsp; {{ frontWidth }}</span>
                </div>
                <input matInput name="frontWidth" readonly />
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Area affected under road widening :
                  </span>
                  <span class="areaAffectedInRoadWidening-value">&nbsp; {{ areaAffectedInRoadWidening }}</span>
                </div>
                <input matInput name="areaAffectedInRoadWidening" readonly />
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Weather the plot is corner plot? :
                  </span>
                  <span class="cPlot-value">&nbsp; {{ cPlot }}</span>
                </div>
                <input matInput name="cPlot" readonly />
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Mechanical ventilation :
                  </span>
                  <span class="mVentilation-value">&nbsp; {{ mVentilation }}</span>
                </div>
                <input matInput name="mVentilation" readonly />
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control" style="width: 100%; display: block;">
                <div class="placeholder-wrapper"
                  style="display: flex; align-items: center; justify-content: flex-start;">
                  <span class="placeholder-text" style="flex-shrink: 0; margin-right: 5px;">
                    Do you want to take the benefit lower category setback:
                  </span>
                  <!-- Apply inline CSS for ellipsis effect and hover functionality -->
                  <span class="lcSetback-value"
                    style="display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90%; position: relative; cursor: pointer; transition: all 0.3s ease;"
                    onmouseover="this.style.whiteSpace='normal'; this.style.overflow='visible'; this.style.textOverflow='unset'; this.style.maxWidth='100%';"
                    onmouseout="this.style.whiteSpace='nowrap'; this.style.overflow='hidden'; this.style.textOverflow='ellipsis'; this.style.maxWidth='90%';">
                    {{ lcSetback }}
                  </span>
                </div>
                <input matInput name="lcSetback" readonly />
              </mat-form-field>
            </div>





            <div class="col-md-4 col-sm-12 col-xs-12">
              <mat-form-field appearance="fill" class="input-control">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text">Benefit from lower category FAR :
                  </span>
                  <span class="lcFar-value">&nbsp; {{ lcFar }}</span>
                </div>
                <input matInput name="lcFar" readonly />
              </mat-form-field>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="display-6 mb-5" style="width: 100%;">
        <mat-card-header>
          <mat-card-title class="mb-3">Building layout document/structural drawing file</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <!-- Full width for the Building Plan header -->
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding: 0;">
            <h3 class="md-display-2" style="margin: 0;">Building plan</h3>
          </div>

          <div class="row" style="width: 100%;">
            <div class="col-md-12 col-sm-12 col-xs-12" style="width: 100%; padding: 0;">
              <!-- Full width for the mat-form-field -->
              <mat-form-field appearance="fill" class="input-control" style="width: 100%;">
                <div class="placeholder-wrapper">
                  <span class="placeholder-text" style="display: inline-block;">Building plan blueprint:</span>
                  <span class="frName-value">&nbsp; {{ frName }}</span>
                </div>
                <input matInput name="frName" readonly style="width: 100%;" />
              </mat-form-field>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

    </div>

    <div class="row m-1">
      <div class="col-md-6 col-sm-12 col-xs-6">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>Uploaded DWG Files ðŸ‘‡ </mat-panel-title>
          </mat-expansion-panel-header>
          <table>
            <thead>
              <tr>
                <th>S.No</th>
                <th>Uploaded Date</th>
                <th>FR ID_File Name</th>
                <th>FR ID_Version</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let file of FileDetails  let i = index">
                <td>{{i+1}}</td>
                <td>{{ file.fcreatedDate | date: 'short'}}</td>
                <td (click)="downloadDwg(file.frUniqueNo,file.frName)" class="viewDoc">{{ file.frName }}</td>
                <td>{{ file.frIdVer }}</td>
              </tr>
            </tbody>
          </table>

        </mat-expansion-panel>
      </div>

      <div class="col-md-6 col-sm-12 col-xs-6">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>Processed File Reports ðŸ‘‡ </mat-panel-title>
          </mat-expansion-panel-header>
          <table>
            <thead>
              <tr>
                <th>S.No</th>
                <th>Processed Date</th>
                <th>Report Name</th>
                <th>File Version</th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngIf="message">
                <tr *ngFor="let file of ProcessedFileDetails  let i = index">
                  <td>{{i+1}}</td>
                  <td>{{ file.createdDate | date: 'short'}}</td>
                  <td (click)="openPaymentPdf(file.uuId)" class="viewDoc">{{ file.reportName }}</td>
                  <td>{{ file.frIdVersion }}</td>
                </tr>
              </ng-container>

              <tr *ngIf="!message">
                <mat-label style="color: rgb(246, 5, 5); margin: 10%; size: 14px">{{ ProcessedFileMessage }}</mat-label>
              </tr>
            </tbody>
          </table>
        </mat-expansion-panel>
      </div>
    </div>

    <div class="d-flex justify-content-center text-center" *ngIf="nextButt">
      <div class="col-md-12 mt-1">
        <button mat-raised-button color="primary" (click)="next()">Next</button>
        <button mat-raised-button color="primary" type="submit" class="log" (click)="back()"
          *ngIf="currentStatus == 'File Processed'" style="margin-left: 2%;">
          Back
        </button>
      </div>
    </div>



    <div class="document-upload" [formGroup]="supportForm" *ngIf="fileReupload">
      <div class="m-4">
        <div class="row mb-2 mt-2 d-flex justify-content-between">
          <mat-card class="display-6 mb-5">
            <mat-card-header>
              <mat-card-title class="mb-3">Building layout document/structural drawing file re-upload on
                error</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="row">
                <div class="col-md-6 col-sm-12 col-xs-12" *ngIf="proff">
                  <mat-label class="title">Upload new drawing document</mat-label>
                  <mat-form-field appearance="fill" class="input-control">
                    <button mat-icon-button matPrefix type="button" (click)="f_input.click()">
                      <mat-icon>attach_file</mat-icon>
                    </button>
                    <input type="text" readonly matInput placeholder="{{ drawingFileName }}" />
                    <input readonly type="file" hidden #f_input (change)="
                      uploadDoc($event, 'DrawingFileCertificateName', [
                        'dwg',
                        'dfx'
                      ])
                    " formControlName="DrawingFileCertificateName" />
                    <mat-hint><strong>File type must be .dwg or .dfx and file size should NOT
                        be more than 50 MB.</strong></mat-hint>
                  </mat-form-field>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

      <!-- <button mat-raised-button color="primary" (click)="submit()">Submit Drawing File </button> -->

      <div class="d-flex justify-content-center me-2 mt-5 mb-5 text-center">
        <div class="col-md-12 mt-1">
          <button mat-raised-button color="primary" type="submit" class="log" (click)="submit()">
            Submit Drawing File
          </button>
          <button mat-raised-button color="primary" type="submit" class="log" (click)="back()"
            *ngIf="currentStatus == 'File Processed'" style="margin-left: 2%;">
            Back
          </button>
        </div>
      </div>
    </div>
  </div>